{"mappings":"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","sources":["src/js/find-movie.js"],"sourcesContent":["// const API_KEY = 'api_key=a3ba6241cf3e8caa1456599894b81cc2';\n// const BASE_URL = 'https://api.themoviedb.org/3';\n// const API_URL = BASE_URL + '/discover/movie?sort_by=popularity.desc&'+API_KEY;\n// const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n// const searchURL = BASE_URL + '/search/movie?'+API_KEY;\nconst API_KEY = 'api_key=a3ba6241cf3e8caa1456599894b81cc2';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_URL = `${BASE_URL}/discover/movie?sort_by=popularity.desc&${API_KEY}`;\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst searchURL = `${BASE_URL}/search/movie?${API_KEY}`;\n\nconst main = document.getElementById('main');\nconst form = document.getElementById('form');\nconst search = document.getElementById('search');\nconst tagsEl = document.getElementById('tags');\n\nconst genres = [\n      {\n        \"id\": 28,\n        \"name\": \"Action\"\n      },\n      {\n        \"id\": 12,\n        \"name\": \"Adventure\"\n      },\n      {\n        \"id\": 16,\n        \"name\": \"Animation\"\n      },\n      {\n        \"id\": 35,\n        \"name\": \"Comedy\"\n      },\n      {\n        \"id\": 80,\n        \"name\": \"Crime\"\n      },\n      {\n        \"id\": 99,\n        \"name\": \"Documentary\"\n      },\n      {\n        \"id\": 18,\n        \"name\": \"Drama\"\n      },\n      {\n        \"id\": 10751,\n        \"name\": \"Family\"\n      },\n      {\n        \"id\": 14,\n        \"name\": \"Fantasy\"\n      },\n      {\n        \"id\": 36,\n        \"name\": \"History\"\n      },\n      {\n        \"id\": 27,\n        \"name\": \"Horror\"\n      },\n      {\n        \"id\": 10402,\n        \"name\": \"Music\"\n      },\n      {\n        \"id\": 9648,\n        \"name\": \"Mystery\"\n      },\n      {\n        \"id\": 10749,\n        \"name\": \"Romance\"\n      },\n      {\n        \"id\": 878,\n        \"name\": \"Science Fiction\"\n      },\n      {\n        \"id\": 10770,\n        \"name\": \"TV Movie\"\n      },\n      {\n        \"id\": 53,\n        \"name\": \"Thriller\"\n      },\n      {\n        \"id\": 10752,\n        \"name\": \"War\"\n      },\n      {\n        \"id\": 37,\n        \"name\": \"Western\"\n      }\n    ];\n\nlet selectedGenre = [];\nsetGenre();\nfunction setGenre(){\n    tagsEl.innerHTML = '';\n    genres.forEach(genre =>{\n        const t = document.createElement('div');\n        t.classList.add('tag');\n        t.id = genre.id;\n        t.innerText = genre.name;\n        t.addEventListener('click', ()=>{\n            if(selectedGenre.length ===0){\n                selectedGenre.push(genre.id);\n            }else{\n                if(selectedGenre.includes(genre.id)){\n                    selectedGenre.forEach((id, idx) =>{\n                        if(id === genre.id){\n                            selectedGenre.splice(idx, 1);\n                        }\n                    })\n                }else{\n                    selectedGenre.push(genre.id);  \n                }\n            }\n            console.log(selectedGenre);\n            getMovies(API_URL + '&with_genres='+encodeURI(selectedGenre.join(',')))\n            highlightSelection();\n        })\n        tagsEl.append(t);\n    })\n}\n\nfunction highlightSelection(){\n    const tags = document.querySelectorAll('.tag');\n    tags.forEach(tag => {\n        tag.classList.remove('highlight');\n    })\n    clearBtn();\n    if(selectedGenre.length !== 0){\n        selectedGenre.forEach(id =>{\n            const highlightedTag = document.getElementById(id);\n            highlightedTag.classList.add('highlight');\n        })\n    }\n}\n\nfunction clearBtn(){\n    let clearBtn = document.getElementById('clear');\n    if(clearBtn){\n        clearBtn.classList.add('clear-btn');\n    } else {\n        let clear = document.createElement('div');\n        clear.classList.add(\"tag\", \"clear-btn\");\n        clear.id = 'clear';\n        clear.innerText = 'Clear X';\n        clear.addEventListener('click', () =>{\n            selectedGenre = [];\n            setGenre();\n            getMovies(API_URL);\n        })\n        tags.append(clear);\n    }\n}\n\n\ngetMovies(API_URL);\nfunction getMovies(url){\n    fetch(url).then(res => res.json()).then(data => {\n        // console.log(data)\n        if(data.results.length !== 0){\n            showMovies(data.results);\n        }else{\n            main.innerHTML = `<h2 class=\"no-results\">No results found</h2>`;\n        }                \n    })\n}\n\nfunction showMovies(data){\n    main.innerHTML='';\n    data.forEach(movie => {\n        const {title, poster_path, vote_average, overview} = movie;\n        const movieEl = document.createElement('div');\n        movieEl.classList.add('movie');\n        movieEl.innerHTML = `\n        <img src=\"${poster_path? IMG_URL+poster_path: \"http://via.placeholder.com/1080x1580\" }\" alt=\"${title}\" width=\"300\" height=\"450\">\n        <div class=\"movie-info\">\n        <h3>${title}</h3>\n        <span class=\"${getColor(vote_average)}\">${vote_average.toFixed(1)}</span>        \n        </div>\n\n        <div class=\"overview\">\n        <h3>Overview</h3>\n        ${overview}\n        </div>\n        `\n        main.appendChild(movieEl);\n    })\n}\n\nfunction getColor(vote) {\n    if(vote>= 8){\n        return 'green'\n    }else if(vote >= 5){\n        return \"orange\"\n    }else{\n        return 'red'\n    }\n}\n\nform.addEventListener ('submit', (e) =>{\n    e.preventDefault();\n    const searchTerm = search.value;\n    selectedGenre = [];\n    highlightSelection();\n    if(searchTerm){\n        getMovies(searchURL+'&query='+searchTerm);\n    }else{\n        getMovies(API_URL);\n    }\n})"],"names":["$fde9126656d2fd1f$var$API_URL","$fde9126656d2fd1f$var$main","document","getElementById","$fde9126656d2fd1f$var$form","$fde9126656d2fd1f$var$search","$fde9126656d2fd1f$var$tagsEl","$fde9126656d2fd1f$var$genres","id","name","$fde9126656d2fd1f$var$selectedGenre","$fde9126656d2fd1f$var$setGenre","innerHTML","forEach","genre","t","createElement","classList","add","innerText","addEventListener","length","push","includes","idx","splice","console","log","$fde9126656d2fd1f$var$getMovies","encodeURI","join","$fde9126656d2fd1f$var$highlightSelection","append","querySelectorAll","tag","remove","$fde9126656d2fd1f$var$clearBtn","clearBtn1","clear","tags","url","fetch","then","res","json","data","results","movie","title","poster_path","vote_average","overview","movieEl","vote","toFixed","appendChild","$fde9126656d2fd1f$var$showMovies","e","preventDefault","searchTerm","value","$fde9126656d2fd1f$var$searchURL"],"version":3,"file":"index.a7bf7a12.js.map"}