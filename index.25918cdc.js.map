{"mappings":"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","sources":["src/js/genres.js","src/js/find-movie.js"],"sourcesContent":["export const genres = [\n    {\n      \"id\": 28,\n      \"name\": \"Action\"\n    },\n    {\n      \"id\": 12,\n      \"name\": \"Adventure\"\n    },\n    {\n      \"id\": 16,\n      \"name\": \"Animation\"\n    },\n    {\n      \"id\": 35,\n      \"name\": \"Comedy\"\n    },\n    {\n      \"id\": 80,\n      \"name\": \"Crime\"\n    },\n    {\n      \"id\": 99,\n      \"name\": \"Documentary\"\n    },\n    {\n      \"id\": 18,\n      \"name\": \"Drama\"\n    },\n    {\n      \"id\": 10751,\n      \"name\": \"Family\"\n    },\n    {\n      \"id\": 14,\n      \"name\": \"Fantasy\"\n    },\n    {\n      \"id\": 36,\n      \"name\": \"History\"\n    },\n    {\n      \"id\": 27,\n      \"name\": \"Horror\"\n    },\n    {\n      \"id\": 10402,\n      \"name\": \"Music\"\n    },\n    {\n      \"id\": 9648,\n      \"name\": \"Mystery\"\n    },\n    {\n      \"id\": 10749,\n      \"name\": \"Romance\"\n    },\n    {\n      \"id\": 878,\n      \"name\": \"Science Fiction\"\n    },\n    {\n      \"id\": 10770,\n      \"name\": \"TV Movie\"\n    },\n    {\n      \"id\": 53,\n      \"name\": \"Thriller\"\n    },\n    {\n      \"id\": 10752,\n      \"name\": \"War\"\n    },\n    {\n      \"id\": 37,\n      \"name\": \"Western\"\n    }\n  ];","// const API_KEY = 'api_key=a3ba6241cf3e8caa1456599894b81cc2';\n// const BASE_URL = 'https://api.themoviedb.org/3';\n// const API_URL = BASE_URL + '/discover/movie?sort_by=popularity.desc&'+API_KEY;\n// const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n// const searchURL = BASE_URL + '/search/movie?'+API_KEY;\nimport {genres} from './genres.js';\n\nconst API_KEY = 'api_key=a3ba6241cf3e8caa1456599894b81cc2';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_URL = `${BASE_URL}/discover/movie?sort_by=popularity.desc&${API_KEY}`;\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst searchURL = `${BASE_URL}/search/movie?${API_KEY}`;\n\nconst main = document.getElementById('main');\nconst form = document.getElementById('form');\nconst search = document.getElementById('search');\nconst tagsEl = document.getElementById('tags');\n\nconst prev = document.getElementById('prev');\nconst current = document.getElementById('current');\nconst next = document.getElementById('next');\n\nlet currentPage = 1;\nlet nextPage = 2;\nlet prevPage = 3;\n// let lastPage = 1000;\nlet lastUrl = '';\nlet totalPages = 1000;\n\n\nlet selectedGenre = [];\nsetGenre();\nfunction setGenre(){\n    tagsEl.innerHTML = '';\n    genres.forEach(genre =>{\n        const t = document.createElement('div');\n        t.classList.add('tag');\n        t.id = genre.id;\n        t.innerText = genre.name;\n        t.addEventListener('click', ()=>{\n            if(selectedGenre.length ===0){\n                selectedGenre.push(genre.id);\n            }else{\n                if(selectedGenre.includes(genre.id)){\n                    selectedGenre.forEach((id, idx) =>{\n                        if(id === genre.id){\n                            selectedGenre.splice(idx, 1);\n                        }\n                    })\n                }else{\n                    selectedGenre.push(genre.id);  \n                }\n            }\n            console.log(selectedGenre);\n            getMovies(API_URL + '&with_genres='+encodeURI(selectedGenre.join(',')))\n            highlightSelection();\n        })\n        tagsEl.append(t);\n    })\n}\n\nfunction highlightSelection(){\n    const tags = document.querySelectorAll('.tag');\n    tags.forEach(tag => {\n        tag.classList.remove('highlight');\n    })\n    clearBtn();\n    if(selectedGenre.length !== 0){\n        selectedGenre.forEach(id =>{\n            const highlightedTag = document.getElementById(id);\n            highlightedTag.classList.add('highlight');\n        })\n    }\n}\n\nfunction clearBtn(){\n    let clearBtn = document.getElementById('clear');\n    if(clearBtn){\n        clearBtn.classList.add('clear-btn');\n    } else {\n        let clear = document.createElement('div');\n        clear.classList.add(\"tag\", \"clear-btn\");\n        clear.id = 'clear';\n        clear.innerText = 'Clear X';\n        clear.addEventListener('click', () =>{\n            selectedGenre = [];\n            setGenre();\n            getMovies(API_URL);\n        })\n        tags.append(clear);\n    }\n}\n\n\ngetMovies(API_URL);\nfunction getMovies(url){\n    lastUrl = url;\n    fetch(url).then(res => res.json()).then(data => {\n        // console.log(data)\n        if(data.results.length !== 0){\n            showMovies(data.results);\n            \n            currentPage = data.page;\n            nextPage = currentPage + 1;\n            prevPage = currentPage - 1;\n            // lastPage = data.total_pages;\n            totalPages = data.total_pages;\n\n            current.innerText = currentPage;\n            if(currentPage <= 1){\n                prev.classList.add('disabled');\n                next.classList.remove('disabled');                \n            } else if(currentPage >= totalPages){\n                prev.classList.remove('disabled');\n                next.classList.add('disabled');  \n            }else {\n                prev.classList.remove('disabled');\n                next.classList.remove('disabled');  \n            }\n            tagsEl.scrollIntoView({behavior: 'smooth'})\n\n        }else{\n            main.innerHTML = `<h2 class=\"no-results\">No results found</h2>`;\n        }                \n    })\n}\n\nfunction showMovies(data){\n    main.innerHTML='';\n    data.forEach(movie => {\n        const {title, poster_path, vote_average, overview} = movie;\n        const movieEl = document.createElement('div');\n        movieEl.classList.add('movie');\n        movieEl.innerHTML = `\n        <img src=\"${poster_path? IMG_URL+poster_path: \"http://via.placeholder.com/1080x1580\" }\" alt=\"${title}\" width=\"300\" height=\"450\">\n        <div class=\"movie-info\">\n        <h3>${title}</h3>\n        <span class=\"${getColor(vote_average)}\">${vote_average.toFixed(1)}</span>        \n        </div>\n\n        <div class=\"overview\">\n        <h3>Overview</h3>\n        ${overview}\n        </div>\n        `\n        main.appendChild(movieEl);\n    })\n}\n\nfunction getColor(vote) {\n    if(vote>= 8){\n        return 'green'\n    }else if(vote >= 5){\n        return \"orange\"\n    }else{\n        return 'red'\n    }\n}\n\nform.addEventListener ('submit', (e) =>{\n    e.preventDefault();\n    const searchTerm = search.value;\n    selectedGenre = [];\n    highlightSelection();\n    if(searchTerm){\n        getMovies(searchURL+'&query='+searchTerm);\n    }else{\n        getMovies(API_URL);\n    }\n})\n\nprev.addEventListener ('click', () => {\n    if(prevPage > 0){\n        pageCall(prevPage);\n    }\n})\n\n\nnext.addEventListener ('click', () => {\n    if(nextPage <= totalPages){\n        pageCall(nextPage);\n    }\n})\n\nfunction pageCall(page){    \n    let urlSplit = lastUrl.split('?');\n    let queryParams = urlSplit[1].split('&');\n    let key = queryParams[queryParams.length - 1].split('=');\n    if(key[0] !== page){\n        let url = lastUrl + \"&page=\" + page\n        getMovies(url)\n    } else {\n        key[1] = page.toString()\n        let a = key.join('=');\n        queryParams[queryParams.length - 1] = a;\n        let b = queryParams.join('&');\n        let url = urlSplit[0] + '?' + b;\n        getMovies(url);\n    }\n}\n\n\n"],"names":["$058be7baf2d85bd2$export$be3a0ca764f9df2b","id","name","$5312ed624bdefc90$var$API_KEY","$5312ed624bdefc90$var$BASE_URL","$5312ed624bdefc90$var$API_URL","concat","$5312ed624bdefc90$var$IMG_URL","$5312ed624bdefc90$var$searchURL","$5312ed624bdefc90$var$main","document","getElementById","$5312ed624bdefc90$var$form","$5312ed624bdefc90$var$search","$5312ed624bdefc90$var$tagsEl","$5312ed624bdefc90$var$prev","$5312ed624bdefc90$var$current","$5312ed624bdefc90$var$next","$5312ed624bdefc90$var$currentPage","$5312ed624bdefc90$var$nextPage","$5312ed624bdefc90$var$prevPage","$5312ed624bdefc90$var$lastUrl","$5312ed624bdefc90$var$totalPages","$5312ed624bdefc90$var$selectedGenre","$5312ed624bdefc90$var$setGenre","innerHTML","forEach","genre","t","createElement","classList","add","innerText","addEventListener","length","push","includes","idx","splice","console","log","$5312ed624bdefc90$var$getMovies","encodeURI","join","$5312ed624bdefc90$var$highlightSelection","append","querySelectorAll","tag","remove","$5312ed624bdefc90$var$clearBtn","clearBtn1","clear","tags","url","fetch","then","res","json","data","results","movie","vote","title","poster_path","vote_average","overview","movieEl","toFixed","appendChild","$5312ed624bdefc90$var$showMovies","page","total_pages","scrollIntoView","behavior","$5312ed624bdefc90$var$pageCall","urlSplit","split","queryParams","key","toString","a","b","e","preventDefault","searchTerm","value"],"version":3,"file":"index.25918cdc.js.map"}